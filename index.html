<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- ===== BLOQUEIO IMEDIATO DE SCROLL - MOBILE + DESKTOP ===== -->
<script>
    (function() {
        if (!sessionStorage.getItem('splashShown')) {
            // Adiciona classes imediatamente
            document.documentElement.classList.add('splash-active');
            
            // Previne TODOS os tipos de scroll (mobile precisa de mais eventos)
            const preventScroll = (e) => {
                e.preventDefault();
                e.stopPropagation();
                return false;
            };
            
            // Desktop
            window.addEventListener('scroll', preventScroll, { passive: false });
            window.addEventListener('wheel', preventScroll, { passive: false });
            
            // Mobile (CR√çTICO)
            document.addEventListener('touchmove', preventScroll, { passive: false });
            document.addEventListener('touchstart', function(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
                }
            }, { passive: false });
            
            // Adiciona classe no body quando ele existir
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    document.body.classList.add('splash-active');
                    
                    // Salva posi√ß√£o do scroll no mobile
                    const scrollY = window.pageYOffset || document.documentElement.scrollTop;
                    document.body.style.top = `-${scrollY}px`;
                });
            } else {
                document.body.classList.add('splash-active');
                const scrollY = window.pageYOffset || document.documentElement.scrollTop;
                document.body.style.top = `-${scrollY}px`;
            }
            
            // Observer para limpar quando o splash sumir
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.attributeName === 'style') {
                        const splash = document.getElementById('splashScreen');
                        if (splash && splash.style.display === 'none') {
                            // Remove tudo
                            document.documentElement.classList.remove('splash-active');
                            document.body.classList.remove('splash-active');
                            
                            // Restaura scroll
                            const scrollY = document.body.style.top;
                            document.body.style.top = '';
                            if (scrollY) {
                                window.scrollTo(0, parseInt(scrollY || '0') * -1);
                            }
                            
                            window.removeEventListener('scroll', preventScroll);
                            window.removeEventListener('wheel', preventScroll);
                            document.removeEventListener('touchmove', preventScroll);
                            observer.disconnect();
                            console.log('üîì Scroll liberado (mobile + desktop)!');
                        }
                    }
                });
            });
            
            // Observa mudan√ßas no splash
            window.addEventListener('DOMContentLoaded', function() {
                const splash = document.getElementById('splashScreen');
                if (splash) {
                    observer.observe(splash, { attributes: true, attributeFilter: ['style'] });
                }
            });
        } else {
            // Se j√° mostrou antes, garante que n√£o h√° bloqueio
            document.documentElement.classList.remove('splash-active');
            if (document.body) {
                document.body.classList.remove('splash-active');
            }
        }
    })();
</script>

    <title>Kevin & Iara - Nosso Amor</title>

    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/admin-styles.css">
    <link rel="stylesheet" href="css/word-game.css">
    <link rel="stylesheet" href="css/playlist-styles.css">
    <link rel="stylesheet" href="css/playlist-edit.css">
    <link rel="stylesheet" href="css/star-map.css">
    <link rel="stylesheet" href="css/splash-screen.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;500;600&family=Raleway:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>">
</head>
<body>

<!-- ===== SPLASH SCREEN - CARREGAMENTO ESTELAR ===== -->
<div id="splashScreen" class="splash-screen">
    <div class="splash-background">
        <canvas id="splashCanvas" class="splash-canvas"></canvas>
    </div>
    
    <div class="splash-content">
        <div class="splash-logo">
            <h1 class="splash-title">
                <span class="name-part kevin">Kevin</span>
                <i class="fas fa-heart splash-heart"></i>
                <span class="name-part iara">Iara</span>
            </h1>
            <p class="splash-subtitle">Carregando mem√≥rias...</p>
        </div>
        
        <div class="splash-loading">
            <div class="loading-bar-container">
                <div class="loading-bar" id="loadingBar"></div>
            </div>
            <div class="loading-text" id="loadingText">Preparando constela√ß√µes...</div>
        </div>
        
        <div class="splash-quote">
            <p>"N√£o importa as constela√ß√µes nem o idioma, eu vou te amar de qualquer maneira."</p>
            <div class="sparkle-container">
                <span class="sparkle">‚ú®</span>
                <span class="sparkle">üí´</span>
                <span class="sparkle">‚ú®</span>
            </div>
        </div>
    </div>
</div>

<!-- ===== MENU HAMB√öRGUER MINIMALISTA ===== -->
<div class="hamburger-menu">
    <button class="hamburger-button" id="hamburgerBtn">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <div class="menu-overlay" id="menuOverlay"></div>

    <nav class="side-menu" id="sideMenu">
        <div class="menu-header">
            <h2>Menu</h2>
            <button class="menu-close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="menu-section">
            <h3>NAVEGA√á√ÉO</h3>
            <ul class="menu-nav">
                <li><a href="#home"><i class="fas fa-home"></i><span>In√≠cio</span></a></li>
                <li><a href="#contador"><i class="fas fa-clock"></i><span>Contador</span></a></li>
                <li><a href="#musicas"><i class="fas fa-music"></i><span>M√∫sicas</span></a></li>
                <li><a href="#albuns"><i class="fas fa-images"></i><span>√Ålbuns</span></a></li>
                <li><a href="#acrostico"><i class="fas fa-wand-magic-sparkles"></i><span>Acr√≥stico</span></a></li>
                <li><a href="#mensagens"><i class="fas fa-envelope"></i><span>Mensagens</span></a></li>
            </ul>
        </div>

        <!-- ‚ú® NOVA SE√á√ÉO: INTERATIVOS -->
        <div class="menu-section">
            <h3>INTERATIVOS</h3>
            <ul class="menu-nav">
                <li><a href="#jogo"><i class="fas fa-gamepad"></i><span>Jogo de Palavras</span></a></li>
                <li><a href="#" id="openStarMapBtn"><i class="fas fa-star"></i><span>Mapa das Estrelas</span></a></li>
                <!-- Futuros interativos aqui -->
            </ul>
        </div>

        <div class="menu-section">
            <h3>TEMA</h3>
            <div class="theme-grid">
                <button class="theme-card active" data-theme="meteors"><i class="fas fa-meteor"></i></button>
                <button class="theme-card" data-theme="hearts"><i class="fas fa-heart"></i></button>
                <button class="theme-card" data-theme="aurora"><i class="fas fa-spa"></i></button>
                <button class="theme-card" data-theme="winter"><i class="fas fa-snowflake"></i></button>
            </div>
        </div>

        <div class="menu-section">
            <button class="admin-menu-btn" id="adminMenuBtn">
                <i class="fas fa-shield-alt"></i>
                <span>Admin</span>
                <i class="fas fa-lock admin-lock-icon"></i>
            </button>
        </div>
    </nav>
</div>

<div class="container">
    <header class="header">
        <div class="names-container">
            <h1 class="name kevin">Kevin</h1>
            <div class="heart-separator"><i class="fas fa-heart"></i></div>
            <h1 class="name iara">Iara</h1>
        </div>
        <p class="subtitle">Uma hist√≥ria escrita a cada momento juntos</p>
    </header>

    <section class="main-section">
        <div class="main-card">
            <div class="couple-photo">
                <img src="images/capa_principal.jpg" alt="Kevin e Iara" id="mainPhoto">
            </div>
            
            <div class="love-message">
                <h2><i class="fas fa-quote-left"></i> Para Minha Amada <i class="fas fa-quote-right"></i></h2>
                <div class="message-content">
                    <p>Iara, desde o momento em que nossos caminhos se cruzaram, minha vida ganhou cores mais vivas, significados mais profundos e um amor que cresce a cada dia.</p>
                    <p>Voc√™ √© a melodia que embala meus dias, o sorriso que ilumina meus momentos e a paz que acalma minha alma. Cada instante ao seu lado √© um tesouro que guardo no cora√ß√£o.</p>
                </div>
                <div class="signature">
                    <p>Com todo meu amor,</p>
                    <p class="signature-name">Kevin</p>
                </div>
            </div>
        </div>
    </section>

    <section class="time-counter-section">
        <h2><i class="far fa-clock"></i> Nossa Linha do Tempo</h2>
        <p class="section-subtitle">Desde que nossas hist√≥rias se entrela√ßaram</p>
        
        <div class="time-counter">
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="years">0</span></div>
                <span class="time-label">Anos</span>
            </div>
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="months">0</span></div>
                <span class="time-label">Meses</span>
            </div>
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="days">0</span></div>
                <span class="time-label">Dias</span>
            </div>
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="hours">0</span></div>
                <span class="time-label">Horas</span>
            </div>
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="minutes">0</span></div>
                <span class="time-label">Minutos</span>
            </div>
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="seconds">0</span></div>
                <span class="time-label">Segundos</span>
            </div>
        </div>
        
        <div class="start-date">
            <p><i class="far fa-calendar-alt"></i> Desde: <span id="startDateDisplay">15/06/2023</span></p>
        </div>
    </section>

    <!-- ‚úÖ PLAYER GERENCIADO 100% PELO PLAYLIST-MANAGER.JS -->
    <section class="music-player-section">
        <h2><i class="fas fa-music"></i> Nossa Trilha Sonora</h2>
        <!-- O conte√∫do √© criado automaticamente pelo playlist-manager.js -->
    </section>

    <section class="albums-section">
        <h2><i class="fas fa-images"></i> Nossas Mem√≥rias</h2>
        
        <!-- NOVO: Carrossel 3D -->
        <div class="albums-carousel-container" id="albumsCarousel">
            <div class="albums-carousel-viewport">
                <div class="albums-carousel-track" id="carouselTrack">
                    <!-- Cards ser√£o inseridos aqui pelo JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Indicadores -->
        <div class="carousel-indicators" id="carouselIndicators"></div>
    </section>

    <div class="album-modal" id="albumModal">
        <div class="modal-content">
            <div class="photo-progress-bar" id="photoProgressBar"></div>
            <div class="modal-header">
                <h3 id="modalAlbumTitle">√Ålbum</h3>
                <button class="close-modal" id="closeModal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="album-viewer">
                    <img id="modalPhoto" src="" alt="Foto">
                </div>
                <button class="album-control-btn prev-btn" id="prevPhotoBtn" style="display: none;"><i class="fas fa-chevron-left"></i></button>
                <button class="album-control-btn next-btn" id="nextPhotoBtn" style="display: none;"><i class="fas fa-chevron-right"></i></button>
                <div class="album-controls">
                    <div class="photo-info">
                        <div class="photo-counter">
                            <span id="currentPhoto">1</span> / <span id="totalPhotos">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== NOVA SE√á√ÉO: ACR√ìSTICO IARA ===== -->
    <section class="acrostic-section" id="acrostico">
        <h2><i class="fas fa-wand-magic-sparkles"></i> Acr√≥stico</h2>

        
        <div class="acrostic-container">
            <!-- Linha I -->
            <div class="acrostic-line" data-line="i">
                <div class="initial-letter i">I</div>
                <div class="line-content">
                    <div class="short-text">
                        <strong>I</strong>lumina cada momento da minha vida
                    </div>
                    <div class="expanded-text">
                        Com a luz dos seus olhos, transformando dias comuns em extraordin√°rios. Voc√™ √© o sol que aquece meu cora√ß√£o e a estrela que guia meus passos.
                    </div>
                </div>
                <i class="fas fa-chevron-down expand-icon"></i>
            </div>

            <!-- Linha A -->
            <div class="acrostic-line" data-line="a1">
                <div class="initial-letter a1">A</div>
                <div class="line-content">
                    <div class="short-text">
                        <strong>A</strong>conchego que me faz sentir completo
                    </div>
                    <div class="expanded-text">
                        Seu abra√ßo √© meu lugar favorito no mundo, onde todos os problemas desaparecem. Em seus bra√ßos encontro paz, seguran√ßa e o verdadeiro significado de lar.
                    </div>
                </div>
                <i class="fas fa-chevron-down expand-icon"></i>
            </div>

            <!-- Linha R -->
            <div class="acrostic-line" data-line="r">
                <div class="initial-letter r">R</div>
                <div class="line-content">
                    <div class="short-text">
                        <strong>R</strong>az√£o de todos os meus sorrisos
                    </div>
                    <div class="expanded-text">
                        Voc√™ tem o dom de arrancar sorrisos de mim sem nem tentar. Sua forma de ser, seus gestos simples e seu jeito √∫nico fazem cada dia valer a pena.
                    </div>
                </div>
                <i class="fas fa-chevron-down expand-icon"></i>
            </div>

            <!-- Linha A -->
            <div class="acrostic-line" data-line="a2">
                <div class="initial-letter a2">A</div>
                <div class="line-content">
                    <div class="short-text">
                        <strong>A</strong>mor que cresce a cada segundo
                    </div>
                    <div class="expanded-text">
                        Superando o que eu achava ser imposs√≠vel, provando que o infinito existe. Meu amor por voc√™ n√£o tem limites, fronteiras ou fim.
                    </div>
                </div>
                <i class="fas fa-chevron-down expand-icon"></i>
            </div>
        </div>
    </section>
    <!-- ===== FIM DO ACR√ìSTICO ===== -->

    <section class="messages-section">
        <h2><i class="fas fa-envelope"></i> Mensagem Especial</h2>
        <div class="message-card">
            <div class="message-content" id="dailyMessage">
                <p class="message-text">"O amor verdadeiro n√£o √© sobre perfei√ß√£o, mas sobre aceita√ß√£o."</p>
                <p class="message-author">‚Äî Para minha Iara</p>
            </div>
            <button class="new-message-btn" id="newMessageBtn">
                <i class="fas fa-sync-alt"></i> Nova Mensagem
            </button>
        </div>
    </section>

    <section class="timeline-button-section">
        <button class="open-timeline-btn" id="openTimelineBtn">
            <i class="fas fa-clock-rotate-left"></i>
            <span>Nossa Linha do Tempo</span>
        </button>
    </section>

    <div class="timeline-modal" id="timelineModal">
        <div class="timeline-modal-content">
            <div class="timeline-modal-header">
                <h2><i class="fas fa-heart"></i> Nossa Hist√≥ria</h2>
                <button class="close-timeline-btn" id="closeTimelineBtn"><i class="fas fa-times"></i></button>
            </div>
            <div class="timeline-scroll">
                <div class="timeline-container">

                <!-- Eventos ser√£o carregados automaticamente do Firebase -->
                    <div class="timeline-end">
                        <div class="timeline-heart"><i class="fas fa-infinity"></i></div>
                        <p>E nossa hist√≥ria continua...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="secret-modal" id="secretModal">
        <div class="secret-modal-content">
            <button class="close-secret-btn" id="closeSecretBtn"><i class="fas fa-times"></i></button>
            <div class="secret-icon"><i class="fas fa-heart"></i></div>
            <div class="secret-message" id="secretMessageText"></div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-heart"><i class="fas fa-heart"></i></div>
            <p class="footer-text">Feito com üíñ para voc√™, Iara</p>
            <p class="footer-date" id="currentDate">Carregando...</p>
            <div class="footer-names">
                <span>Kevin</span> 
                <i class="fas fa-heart"></i> 
                <span>Iara</span>
            </div>
        </div>
    </footer>
</div>

<!-- ===== BOT√ÉO FLUTUANTE DE ADMIN (ESCONDIDO - ACESS√çVEL PELO MENU) ===== -->
<button class="admin-toggle-btn" id="adminToggleBtn" title="Modo Admin" style="display: none !important;">
    <i class="fas fa-lock"></i>
</button>

<!-- ===== MODAL DE ADMIN COMPLETO ===== -->
<div class="admin-modal" id="adminModal">
    <div class="admin-modal-content">
        <div class="admin-header">
            <h2><i class="fas fa-user-shield"></i> Painel de Admin</h2>
            <button class="close-admin-btn" id="closeAdminBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-tabs">
            <button class="admin-tab active" data-tab="albums">
                <i class="fas fa-images"></i> √Ålbuns
            </button>
            <button class="admin-tab" data-tab="timeline">
                <i class="fas fa-clock"></i> Timeline
            </button>
            <button class="admin-tab" data-tab="playlists">
                <i class="fas fa-music"></i> Playlists
            </button>
            <button class="admin-tab" data-tab="star-map">
                <i class="fas fa-star"></i> Mapa das Estrelas
            </button>
        </div>
        
        <!-- TAB: Gerenciar √Ålbuns (styled like Playlists/Star Map) -->
        <div class="admin-content active" id="albums-tab">
            <div class="album-create-card">
                <div class="card-icon-header">
                    <div class="icon-circle">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <h3>Criar Novo √Ålbum</h3>
                </div>

                <form id="addAlbumForm" class="modern-form">
                    <div class="input-group">
                        <label>
                            <i class="fas fa-images"></i>
                            T√≠tulo do √Ålbum
                        </label>
                        <input type="text" id="albumTitle" placeholder="T√≠tulo do √Ålbum" required>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-calendar-alt"></i>
                            Data
                        </label>
                        <input type="text" id="albumDate" placeholder="Data (ex: Junho 2023)" required>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-align-left"></i>
                            Descri√ß√£o
                        </label>
                        <textarea id="albumDescription" placeholder="Descri√ß√£o do √°lbum" rows="3" required></textarea>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-file-image"></i>
                            Capa do √Ålbum
                        </label>
                        <input type="file" id="albumCover" accept="image/*" required>
                    </div>

                    <button type="submit" class="submit-btn">
                        <i class="fas fa-save"></i>
                        Criar √Ålbum
                    </button>
                </form>
            </div>

            <div class="album-add-photos-card" style="margin-top: 18px;">
                <div class="card-icon-header">
                    <div class="icon-circle green">
                        <i class="fas fa-photo-video"></i>
                    </div>
                    <h3>Adicionar Fotos ao √Ålbum</h3>
                </div>

                <div class="input-group">
                    <label>
                        <i class="fas fa-list"></i>
                        Selecionar √Ålbum
                    </label>
                    <select id="selectAlbum" class="modern-select" aria-label="Selecionar √°lbum">
                        <option value="">Selecione um √°lbum</option>
                    </select>
                </div>

                <form id="addPhotoForm" class="modern-form">
                    <div class="input-group">
                        <label>
                            <i class="fas fa-images"></i>
                            Selecionar Fotos
                        </label>
                        <input type="file" id="photoFile" accept="image/*" multiple required>
                    </div>
                    <button type="submit" class="submit-btn green">
                        <i class="fas fa-upload"></i>
                        Adicionar Fotos
                    </button>
                </form>
            </div>

            <!-- ===== SE√á√ÉO DE EDITAR √ÅLBUM ===== -->
            <div class="album-edit-card" style="margin-top: 18px;">
                <div class="card-icon-header">
                    <div class="icon-circle purple">
                        <i class="fas fa-pen-fancy"></i>
                    </div>
                    <h3>Editar √Ålbum</h3>
                </div>

                <div class="input-group">
                    <label>
                        <i class="fas fa-folder-open"></i>
                        Selecionar √Ålbum
                    </label>
                    <select id="editAlbumSelect" class="modern-select" aria-label="Selecionar √°lbum para editar">
                        <option value="">Escolha um √°lbum...</option>
                    </select>
                </div>

                <button id="loadEditAlbumBtn" class="submit-btn purple" style="margin-top: 12px; width: 100%;">
                    <i class="fas fa-images"></i> Carregar e Editar
                </button>

                <!-- Se√ß√£o de informa√ß√µes do √°lbum (oculta por padr√£o) -->
                <div id="editAlbumInfoSection" style="display: none; margin-top: 20px;">
                    <h4 style="margin-bottom: 15px; font-size: 1.1em; color: var(--theme-text);">
                        <i class="fas fa-info-circle" style="margin-right: 8px;"></i>Informa√ß√µes do √Ålbum
                    </h4>
                    <button id="toggleAlbumInfoEdit" class="simple-edit-btn" style="width: 100%; justify-content: center; margin-bottom: 15px;">
                        <i class="fas fa-edit"></i>
                        <span class="edit-text">Editar Informa√ß√µes</span>
                    </button>

                    <div id="albumInfoEditForm" style="display: none; margin-top: 15px;">
                        <div class="edit-form-grid">
                            <div class="cover-preview-container">
                                <img id="currentCoverPreview" src="" alt="Capa atual" style="max-width: 100%; border-radius: 8px;">
                                <label for="newCoverInput" class="change-cover-label">
                                    <i class="fas fa-camera"></i>
                                    <span>Trocar Capa</span>
                                </label>
                                <input type="file" id="newCoverInput" accept="image/*" style="display: none;" aria-label="Selecionar nova capa do √°lbum">
                            </div>
                            
                            <div class="edit-fields-container">
                                <div class="edit-field">
                                    <label>T√≠tulo</label>
                                    <input type="text" id="editAlbumTitle" placeholder="T√≠tulo do √°lbum">
                                </div>
                                
                                <div class="edit-field">
                                    <label>Data</label>
                                    <input type="text" id="editAlbumDate" placeholder="Ex: Junho 2023">
                                </div>
                                
                                <div class="edit-field">
                                    <label>Descri√ß√£o</label>
                                    <textarea id="editAlbumDescription" rows="3" placeholder="Descri√ß√£o do √°lbum"></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <div class="edit-actions" style="margin-top: 15px;">
                            <button id="cancelAlbumEdit" class="minimal-btn cancel">
                                <i class="fas fa-times"></i>
                                <span>Cancelar</span>
                            </button>
                            <button id="saveAlbumEdit" class="minimal-btn save">
                                <i class="fas fa-check"></i>
                                <span>Salvar</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Grid de fotos para editar (oculto por padr√£o) -->
                <div id="editAlbumSection" style="display: none; margin-top: 20px;">
                    <h4 style="margin-bottom: 15px; font-size: 1.1em; color: var(--theme-text);">
                        <i class="fas fa-photo-video" style="margin-right: 8px;"></i>Gerenciar Fotos
                    </h4>
                    <div id="editPhotosGrid" class="edit-photos-grid"></div>
                </div>
            </div>

            <div class="albums-library" style="margin-top: 18px;">
                <div class="library-header">
                    <div class="header-icon">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <h3>√Ålbuns Existentes</h3>
                </div>

                <div id="existingAlbums" class="playlists-grid existing-items">
                    <div class="loading-state">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Carregando √°lbuns...</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- TAB: Gerenciar Timeline (styled like Playlists/Star Map) -->
        <div class="admin-content" id="timeline-tab">
            <div class="event-create-card">
                <div class="card-icon-header">
                    <div class="icon-circle">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <h3>Adicionar Evento na Timeline</h3>
                </div>

                <form id="addTimelineForm" class="modern-form">
                    <div class="input-group">
                        <label>
                            <i class="fas fa-calendar-alt"></i>
                            Data do Evento
                        </label>
                        <input type="text" id="eventDate" placeholder="Data (ex: Setembro 2022)" required>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-heading"></i>
                            T√≠tulo do Evento
                        </label>
                        <input type="text" id="eventTitle" placeholder="T√≠tulo do Evento" required>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-comment-alt"></i>
                            Mensagem Secreta
                        </label>
                        <textarea id="eventSecret" placeholder="Mensagem secreta (opcional)" rows="3"></textarea>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-image"></i>
                            Foto do Evento
                        </label>
                        <input type="file" id="eventPhoto" accept="image/*" required>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-tag"></i>
                            Legenda da Foto
                        </label>
                        <input type="text" id="photoCaption" placeholder="Legenda da foto">
                    </div>

                    <button type="submit" class="submit-btn">
                        <i class="fas fa-save"></i>
                        Adicionar Evento
                    </button>
                </form>
            </div>

            <div class="events-library" style="margin-top: 18px;">
                <div class="library-header">
                    <div class="header-icon">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <h3>Eventos Existentes</h3>
                </div>

                <div id="existingEvents" class="playlists-grid existing-items">
                    <div class="loading-state">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Carregando eventos...</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- TAB: Playlists (moved from admin.js) -->
        <div class="admin-content" id="playlists-tab">
            <div class="playlist-create-card">
                <div class="card-icon-header">
                    <div class="icon-circle">
                        <i class="fas fa-plus"></i>
                    </div>
                    <h3>Criar Nova Playlist</h3>
                </div>
                
                <form id="createPlaylistForm" class="modern-form">
                    <div class="input-group">
                        <label>
                            <i class="fas fa-music"></i>
                            Nome da Playlist
                        </label>
                        <input type="text" id="playlistName" placeholder="Ex: Rom√¢nticas, Rock, Sertanejo..." required>
                    </div>
                    
                    <div class="input-group">
                        <label>
                            <i class="fas fa-icons"></i>
                            Escolha um √çcone
                        </label>
                        <div class="icon-selector">
                            <input type="radio" name="playlistIcon" id="icon-heart" value="fa-heart" checked>
                            <label for="icon-heart" class="icon-option">
                                <i class="fas fa-heart"></i>
                            </label>
                            
                            <input type="radio" name="playlistIcon" id="icon-music" value="fa-music">
                            <label for="icon-music" class="icon-option">
                                <i class="fas fa-music"></i>
                            </label>
                            
                            <input type="radio" name="playlistIcon" id="icon-guitar" value="fa-guitar">
                            <label for="icon-guitar" class="icon-option">
                                <i class="fas fa-guitar"></i>
                            </label>
                            
                            <input type="radio" name="playlistIcon" id="icon-fire" value="fa-fire">
                            <label for="icon-fire" class="icon-option">
                                <i class="fas fa-fire"></i>
                            </label>
                            
                            <input type="radio" name="playlistIcon" id="icon-star" value="fa-star">
                            <label for="icon-star" class="icon-option">
                                <i class="fas fa-star"></i>
                            </label>
                            
                            <input type="radio" name="playlistIcon" id="icon-headphones" value="fa-headphones">
                            <label for="icon-headphones" class="icon-option">
                                <i class="fas fa-headphones"></i>
                            </label>
                        </div>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-check-circle"></i>
                        Criar Playlist
                    </button>
                </form>
            </div>
            
            <div class="playlist-add-music-card" id="addMusicSection" style="display: none;">
                <div class="card-icon-header">
                    <div class="icon-circle green">
                        <i class="fas fa-compact-disc"></i>
                    </div>
                    <h3>Adicionar M√∫sica</h3>
                </div>
                
                <div class="input-group">
                    <label>
                        <i class="fas fa-list-music"></i>
                        Selecione a Playlist
                    </label>
                    <select id="selectPlaylistForMusic" class="modern-select">
                        <option value="">Escolha uma playlist...</option>
                    </select>
                </div>
                
                <form id="addMusicForm" class="modern-form" style="display: none; margin-top: 20px;">
                    <div class="form-group">
                        <label>üìÅ Arquivo de √Åudio</label>
                        <input type="file" id="musicAudioFile" accept="audio/*" multiple required>
                        <small style="color: var(--theme-text-secondary); display: block; margin-top: 5px;">
                            MP3, M4A, WAV, OGG, FLAC (m√°ximo 100MB)
                        </small>

                        <div id="multiMusicPreviewContainer" class="multi-music-preview-container" style="display: none; margin-top: 15px;">
                            <div class="preview-header-multi">
                                <i class="fas fa-compact-disc"></i>
                                <span>M√∫sicas Selecionadas (<span id="musicCount">0</span>)</span>
                            </div>
                            <div id="musicPreviewList" class="music-preview-list"></div>
                            <div id="selectedMusicDetails" class="selected-music-details" style="display: none;">
                                <div class="details-header">
                                    <i class="fas fa-info-circle"></i>
                                    <span>Detalhes da M√∫sica</span>
                                </div>
                                <div class="details-content">
                                    <img id="detailsCoverImage" class="details-cover" src="" alt="Capa">
                                    <div class="details-info">
                                        <div class="detail-row editable">
                                            <strong>üìù T√≠tulo:</strong>
                                            <input type="text" id="detailsTitle" class="detail-input" placeholder="T√≠tulo da m√∫sica">
                                        </div>
                                        <div class="detail-row editable">
                                            <strong>üé§ Artista:</strong>
                                            <input type="text" id="detailsArtist" class="detail-input" placeholder="Nome do artista">
                                        </div>
                                        <div class="detail-row editable">
                                            <strong>üíø √Ålbum:</strong>
                                            <input type="text" id="detailsAlbum" class="detail-input" placeholder="Nome do √°lbum (opcional)">
                                        </div>
                                        <div class="detail-row">
                                            <strong>üì¶ Tamanho:</strong>
                                            <span id="detailsSize">-</span>
                                        </div>
                                        <div class="detail-row">
                                            <strong>üñºÔ∏è Capa:</strong>
                                            <span id="detailsCoverStatus">-</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="submit-btn green">
                        <i class="fas fa-plus-circle"></i>
                        Adicionar √† Playlist
                    </button>
                </form>
            </div>
            
            <div class="playlists-library">
                <div class="library-header">
                    <div class="header-icon">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <h3>Suas Playlists</h3>
                </div>
                
                
                <div id="existingPlaylists" class="playlists-grid">
                    <div class="loading-state">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Carregando playlists...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB: Editar √Ålbum (moved from admin.js) -->
        <div class="admin-content" id="edit-tab">
            <div class="admin-section">
                <h3><i class="fas fa-folder-open"></i> Selecione um √Ålbum</h3>
                <select id="editAlbumSelect" class="admin-select">
                    <option value="">Escolha um √°lbum...</option>
                </select>
                <button id="loadEditAlbumBtn" class="admin-btn" style="margin-top: 12px;">
                    <i class="fas fa-images"></i> Carregar Fotos
                </button>
            </div>
            
            <div id="editAlbumInfoSection" style="display: none;">
                <div class="admin-section">
                    <h3><i class="fas fa-pen"></i> Editar Informa√ß√µes do √Ålbum</h3>
                    <button id="toggleAlbumInfoEdit" class="simple-edit-btn">
                        <i class="fas fa-edit"></i>
                        <span class="edit-text">Editar √Ålbum</span>
                    </button>
                    <div id="albumInfoEditForm" style="display: none; margin-top: 15px;">
                        <div class="edit-form-grid">
                            <div class="cover-preview-container">
                                <img id="currentCoverPreview" src="" alt="Capa atual">
                                <label for="newCoverInput" class="change-cover-label">
                                    <i class="fas fa-camera"></i>
                                    <span>Trocar Capa</span>
                                </label>
                                <input type="file" id="newCoverInput" accept="image/*" style="display: none;" aria-label="Selecionar nova capa do √°lbum">
                            </div>
                            
                            <div class="edit-fields-container">
                                <div class="edit-field">
                                    <label>T√≠tulo</label>
                                    <input type="text" id="editAlbumTitle" placeholder="T√≠tulo do √°lbum">
                                </div>
                                
                                <div class="edit-field">
                                    <label>Data</label>
                                    <input type="text" id="editAlbumDate" placeholder="Ex: Junho 2023">
                                </div>
                                
                                <div class="edit-field">
                                    <label>Descri√ß√£o</label>
                                    <textarea id="editAlbumDescription" rows="3" placeholder="Descri√ß√£o do √°lbum"></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <div class="edit-actions">
                            <button id="cancelAlbumEdit" class="minimal-btn cancel">
                                <i class="fas fa-times"></i>
                                <span>Cancelar</span>
                            </button>
                            <button id="saveAlbumEdit" class="minimal-btn save">
                                <i class="fas fa-check"></i>
                                <span>Salvar</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="editAlbumSection" style="display: none;">
                <div id="editPhotosGrid" class="edit-photos-grid"></div>
            </div>
        </div>

        <!-- TAB: Mapa das Estrelas (moved from admin.js) -->
        <div class="admin-content" id="star-map-tab">
            <div class="star-map-config-card">
                <div class="card-icon-header">
                    <div class="icon-circle galaxy">
                        <i class="fas fa-star"></i>
                    </div>
                    <h3>Configura√ß√µes do Mapa das Estrelas</h3>
                </div>
                
                <form id="starMapConfigForm" class="modern-form">
                    <div class="input-group">
                        <label>
                            <i class="fas fa-calendar-heart"></i>
                            Data Especial (ex: dia que se conheceram)
                        </label>
                        <input type="date" id="specialDate" placeholder="Selecione a data...">
                        <small style="color: var(--theme-text-secondary); margin-top: 5px; display: block;">
                            Deixe vazio para usar a data atual automaticamente
                        </small>
                    </div>
                    
                    <div class="input-group">
                        <label>
                            <i class="fas fa-map-marker-alt"></i>
                            Localiza√ß√£o
                        </label>
                        <div class="location-options">
                            <label class="radio-option">
                                <input type="radio" name="locationType" value="auto" checked>
                                <span class="radio-label">
                                    <i class="fas fa-location-arrow"></i>
                                    Detectar Automaticamente
                                </span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="locationType" value="manual">
                                <span class="radio-label">
                                    <i class="fas fa-map-pin"></i>
                                    Manual
                                </span>
                            </label>
                        </div>
                    </div>
                    
                    <div id="manualLocationFields" class="manual-location-fields" style="display: none;">
                        <div class="form-row">
                            <div class="input-group">
                                <label>Latitude</label>
                                <input type="number" id="latitude" step="0.0001" placeholder="Ex: 42.4164">
                            </div>
                            <div class="input-group">
                                <label>Longitude</label>
                                <input type="number" id="longitude" step="0.0001" placeholder="Ex: -88.6137">
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Nome do Local</label>
                            <input type="text" id="locationName" placeholder="Ex: Harvard, Illinois">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>
                            <i class="fas fa-heart"></i>
                            Frase Rom√¢ntica
                        </label>
                        <textarea id="romanticQuote" rows="3" placeholder="Ex: O c√©u quando nossos mundos se colidiram"></textarea>
                        <small style="color: var(--theme-text-secondary); margin-top: 5px; display: block;">
                            Esta frase aparecer√° no Mapa das Estrelas
                        </small>
                    </div>
                    
                    <div class="constellation-preview" id="constellationPreview">
                        <div class="preview-header">
                            <i class="fas fa-eye"></i>
                            <span>Preview das Constela√ß√µes</span>
                        </div>
                        <div class="preview-content" id="previewContent">
                            <div class="preview-loading">
                                <i class="fas fa-spinner fa-spin"></i>
                                <p>Calcule para ver o preview...</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="submit-btn preview" id="calculatePreviewBtn">
                            <i class="fas fa-calculator"></i>
                            Calcular Preview
                        </button>
                        <button type="submit" class="submit-btn galaxy">
                            <i class="fas fa-save"></i>
                            Salvar Configura√ß√µes
                        </button>
                    </div>
                </form>
            </div>
            
            <div class="star-map-info-card">
                <div class="info-icon">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="info-content">
                    <h4>Como funciona?</h4>
                    <ul>
                        <li><strong>Data Especial:</strong> O sistema calcular√° as 3 constela√ß√µes principais vis√≠veis nesta data</li>
                        <li><strong>Localiza√ß√£o:</strong> Influencia quais constela√ß√µes aparecem (hemisf√©rio norte/sul)</li>
                        <li><strong>Preview:</strong> Clique em "Calcular Preview" para ver quais constela√ß√µes ser√£o exibidas</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ===== MODAL DO JOGO DE PALAVRAS ===== -->
<div class="bottom-toolbar" id="bottomToolbar" style="display: none;">
    <button id="cancelSelection" class="bottom-btn cancel-btn">
        <i class="fas fa-times"></i>
        <span>Cancelar</span>
    </button>

    <div class="bottom-info">
        <span id="selectionCount">0 selecionadas</span>
    </div>

    <button id="reorganizePhotos" class="bottom-btn reorganize-btn">
        <i class="fas fa-sort"></i>
        <span>Reorganizar</span>
    </button>

    <button id="deleteSelectedPhotos" class="bottom-btn delete-btn">
        <i class="fas fa-trash"></i>
        <span>Deletar</span>
    </button>
</div>
<div class="word-game-modal" id="wordGameModal">
    <div class="word-game-content">
        <!-- √Årea Scroll√°vel -->
        <div class="word-game-scrollable">
            <!-- Header -->
            <div class="word-game-header">
                <h2><i class="fas fa-gamepad"></i> Jogo de Palavras</h2>
                <button class="close-word-game-btn" id="closeWordGameBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Pergunta/Dica -->
            <div class="word-game-question">
                <p id="wordGameQuestion">Carregando...</p>
            </div>

            <!-- Grid de Letras -->
            <div class="word-game-grid" id="wordGameGrid">
                <!-- Gerado dinamicamente pelo JS -->
            </div>

            <!-- ‚ú® NOVO: Bot√µes de A√ß√£o (Apagar e Enviar) -->
            <div class="keyboard-action-buttons">
                <button class="action-btn action-delete" data-key="BACKSPACE" title="Apagar">
                    <i class="fas fa-backspace"></i>
                </button>
                <button class="action-btn action-submit" data-key="ENTER" title="Enviar">
                    <i class="fas fa-check"></i>
                </button>
            </div>

            <!-- Teclado Virtual - SEM bot√µes ENVIAR/APAGAR -->
            <div class="word-game-keyboard" id="wordGameKeyboard">
                <div class="keyboard-row">
                    <button class="key-btn" data-key="Q">Q</button>
                    <button class="key-btn" data-key="W">W</button>
                    <button class="key-btn" data-key="E">E</button>
                    <button class="key-btn" data-key="R">R</button>
                    <button class="key-btn" data-key="T">T</button>
                    <button class="key-btn" data-key="Y">Y</button>
                    <button class="key-btn" data-key="U">U</button>
                    <button class="key-btn" data-key="I">I</button>
                    <button class="key-btn" data-key="O">O</button>
                    <button class="key-btn" data-key="P">P</button>
                </div>
                <div class="keyboard-row">
                    <button class="key-btn" data-key="A">A</button>
                    <button class="key-btn" data-key="S">S</button>
                    <button class="key-btn" data-key="D">D</button>
                    <button class="key-btn" data-key="F">F</button>
                    <button class="key-btn" data-key="G">G</button>
                    <button class="key-btn" data-key="H">H</button>
                    <button class="key-btn" data-key="J">J</button>
                    <button class="key-btn" data-key="K">K</button>
                    <button class="key-btn" data-key="L">L</button>
                </div>
                <div class="keyboard-row">
                    <button class="key-btn" data-key="Z">Z</button>
                    <button class="key-btn" data-key="X">X</button>
                    <button class="key-btn" data-key="C">C</button>
                    <button class="key-btn" data-key="V">V</button>
                    <button class="key-btn" data-key="B">B</button>
                    <button class="key-btn" data-key="N">N</button>
                    <button class="key-btn" data-key="M">M</button>
                </div>
            </div>

            <!-- Resultado (overlay sobre tudo) -->
            <div class="word-game-result" id="wordGameResult" style="display: none;">
                <div class="result-icon" id="resultIcon">
                    <i class="fas fa-heart"></i>
                </div>
                <h3 id="resultTitle">Parab√©ns!</h3>
                <p id="resultMessage">Mensagem especial aqui</p>
                <button class="result-btn" id="nextWordBtn">
                    <i class="fas fa-play"></i> Pr√≥xima Palavra
                </button>
            </div>
        </div>
        <!-- FIM da √°rea scroll√°vel -->
    </div>
</div>

<!-- ===== MODAL DO MAPA DAS ESTRELAS ===== -->
<div class="star-map-modal" id="starMapModal">
    <div class="star-map-modal-content">
        <button class="close-star-map-btn" id="closeStarMapBtn">
            <i class="fas fa-times"></i>
        </button>
        
        <h1 class="star-map-title">Kevin & Iara</h1>
        
        <div class="star-map-canvas-wrapper">
            <canvas id="starMapCanvas"></canvas>
        </div>
        
        <p class="star-map-quote">
            "N√£o importa as constela√ß√µes nem o idioma,<br>
            eu vou te amar de qualquer maneira."
        </p>

        
        <div class="star-map-details">
            <span class="star-map-location">HARVARD, ILLINOIS, US</span><br>
            <span class="star-map-date">18 DE JANEIRO DE 2026</span><br>
            <span class="star-map-coordinates">42.4164¬∞N 88.6137¬∞W</span>
        </div>
        
        <button class="star-warp-button" id="startStarWarp">
            <i class="fas fa-rocket"></i> Iniciar Viagem
        </button>
        
        <div class="star-map-footer">Mapa das Estrelas</div>
    </div>

    <div class="star-tunnel-effect" id="starTunnelEffect"></div>
</div>

<!-- ===== PAINEL DE LOGIN ADMIN PERSONALIZADO ===== -->
<div class="admin-login-modal" id="adminLoginModal" style="display: none;">
    <div class="admin-login-card">
        <h3>üîê Acesso Admin</h3>
        <form id="adminLoginForm">
            <div class="login-input-group">
                <label for="adminPasswordInput">Senha</label>
                <input type="password" id="adminPasswordInput" placeholder="Digite a senha de admin" autocomplete="current-password" required>
            </div>
            <div class="login-actions">
                <button type="submit" class="admin-btn">Entrar</button>
                <button type="button" class="admin-btn cancel-btn" id="adminLoginCancel">Cancelar</button>
            </div>
            <div class="login-error" id="adminLoginError" aria-live="polite" style="display:none;color:#ff6b6b;margin-top:10px;"></div>
        </form>
    </div>
</div>

<!-- ORDEM CORRETA DE CARREGAMENTO DOS SCRIPTS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jsmediatags/3.9.5/jsmediatags.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="js/firebase-config.js"></script>
<script src="js/splash-screen.js"></script>
<script src="js/cloudinary-config.js"></script>
<script src="js/lazy-loading.js"></script>
<script src="js/lazy-loading-album-navigation.js"></script> 
<script src="js/mp3-cover-extractor.js"></script>
<script src="js/animations.js"></script>
<script src="js/playlist-manager.js"></script>
<script src="js/playlist-edit.js"></script>
<script src="js/script.js"></script>
<script src="js/word-game.js"></script>
<script src="js/star-map-preloader.js"></script>
<script src="js/star-map.js"></script>


<!-- ===== FALLBACK PARA CSS N√ÉO CR√çTICO ===== -->
<script>
    // Fallback para navegadores que n√£o suportam preload
    if (!('relList' in document.createElement('link'))) {
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'styles.css';
        document.head.appendChild(link);
    }
</script>

</body>
</html>
