<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kevin & Iara - Nosso Amor</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;500;600&family=Raleway:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>">
    <link rel="stylesheet" href="playlist-styles.css">
</head>
<body>

<!-- ===== MENU HAMB√öRGUER MINIMALISTA ===== -->
<div class="hamburger-menu">
    <button class="hamburger-button" id="hamburgerBtn">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <div class="menu-overlay" id="menuOverlay"></div>

    <nav class="side-menu" id="sideMenu">
        <div class="menu-header">
            <h2>Menu</h2>
            <button class="menu-close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="menu-section">
            <h3>NAVEGA√á√ÉO</h3>
            <ul class="menu-nav">
                <li><a href="#home"><i class="fas fa-home"></i><span>In√≠cio</span></a></li>
                <li><a href="#contador"><i class="fas fa-clock"></i><span>Contador</span></a></li>
                <li><a href="#musicas"><i class="fas fa-music"></i><span>M√∫sicas</span></a></li>
                <li><a href="#albuns"><i class="fas fa-images"></i><span>√Ålbuns</span></a></li>
                <li><a href="#mensagens"><i class="fas fa-envelope"></i><span>Mensagens</span></a></li>
            </ul>
        </div>

        <div class="menu-section">
            <h3>TEMA</h3>
            <div class="theme-grid">
                <button class="theme-card active" data-theme="meteors"><i class="fas fa-meteor"></i></button>
                <button class="theme-card" data-theme="hearts"><i class="fas fa-heart"></i></button>
                <button class="theme-card" data-theme="aurora"><i class="fas fa-spa"></i></button>
                <button class="theme-card" data-theme="winter"><i class="fas fa-snowflake"></i></button>
            </div>
        </div>

        <div class="menu-section">
            <button class="admin-menu-btn" id="adminMenuBtn">
                <i class="fas fa-shield-alt"></i>
                <span>Admin</span>
                <i class="fas fa-lock admin-lock-icon"></i>
            </button>
        </div>
    </nav>
</div>

<div class="container">
    <header class="header">
        <div class="names-container">
            <h1 class="name kevin">Kevin</h1>
            <div class="heart-separator"><i class="fas fa-heart"></i></div>
            <h1 class="name iara">Iara</h1>
        </div>
        <p class="subtitle">Uma hist√≥ria escrita a cada momento juntos</p>
    </header>

    <section class="main-section">
        <div class="main-card">
            <div class="couple-photo">
                <img src="images/capa_principal.jpg" alt="Kevin e Iara" id="mainPhoto">
            </div>
            
            <div class="love-message">
                <h2><i class="fas fa-quote-left"></i> Para Minha Amada <i class="fas fa-quote-right"></i></h2>
                <div class="message-content">
                    <p>Iara, desde o momento em que nossos caminhos se cruzaram, minha vida ganhou cores mais vivas, significados mais profundos e um amor que cresce a cada dia.</p>
                    <p>Voc√™ √© a melodia que embala meus dias, o sorriso que ilumina meus momentos e a paz que acalma minha alma. Cada instante ao seu lado √© um tesouro que guardo no cora√ß√£o.</p>
                </div>
                <div class="signature">
                    <p>Com todo meu amor,</p>
                    <p class="signature-name">Kevin</p>
                </div>
            </div>
        </div>
    </section>

    <section class="time-counter-section">
        <h2><i class="far fa-clock"></i> Nossa Linha do Tempo</h2>
        <p class="section-subtitle">Desde que nossas hist√≥rias se entrela√ßaram</p>
        
        <div class="time-counter">
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="years">0</span></div>
                <span class="time-label">Anos</span>
            </div>
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="months">0</span></div>
                <span class="time-label">Meses</span>
            </div>
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="days">0</span></div>
                <span class="time-label">Dias</span>
            </div>
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="hours">0</span></div>
                <span class="time-label">Horas</span>
            </div>
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="minutes">0</span></div>
                <span class="time-label">Minutos</span>
            </div>
            <div class="time-unit">
                <div class="time-box"><span class="time-value" id="seconds">0</span></div>
                <span class="time-label">Segundos</span>
            </div>
        </div>
        
        <div class="start-date">
            <p><i class="far fa-calendar-alt"></i> Desde: <span id="startDateDisplay">15/06/2023</span></p>
        </div>
    </section>

    <!-- ‚úÖ PLAYER GERENCIADO 100% PELO PLAYLIST-MANAGER.JS -->
    <section class="music-player-section">
        <h2><i class="fas fa-music"></i> Nossa Trilha Sonora</h2>
        <!-- O conte√∫do √© criado automaticamente pelo playlist-manager.js -->
    </section>

    <section class="albums-section">
        <h2><i class="fas fa-images"></i> Nossas Mem√≥rias</h2>
        <div class="albums-container" id="albumsContainer"></div>
    </section>

    <div class="album-modal" id="albumModal">
        <div class="modal-content">
            <div class="photo-progress-bar" id="photoProgressBar"></div>
            <div class="modal-header">
                <h3 id="modalAlbumTitle">√Ålbum</h3>
                <button class="close-modal" id="closeModal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="album-viewer">
                    <img id="modalPhoto" src="" alt="Foto">
                </div>
                <button class="album-control-btn prev-btn" id="prevPhotoBtn" style="display: none;"><i class="fas fa-chevron-left"></i></button>
                <button class="album-control-btn next-btn" id="nextPhotoBtn" style="display: none;"><i class="fas fa-chevron-right"></i></button>
                <div class="album-controls">
                    <div class="photo-info">
                        <div class="photo-counter">
                            <span id="currentPhoto">1</span> / <span id="totalPhotos">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section class="messages-section">
        <h2><i class="fas fa-envelope"></i> Mensagem Especial</h2>
        <div class="message-card">
            <div class="message-content" id="dailyMessage">
                <p class="message-text">"O amor verdadeiro n√£o √© sobre perfei√ß√£o, mas sobre aceita√ß√£o."</p>
                <p class="message-author">‚Äî Para minha Iara</p>
            </div>
            <button class="new-message-btn" id="newMessageBtn">
                <i class="fas fa-sync-alt"></i> Nova Mensagem
            </button>
        </div>
    </section>

    <section class="timeline-button-section">
        <button class="open-timeline-btn" id="openTimelineBtn">
            <i class="fas fa-clock-rotate-left"></i>
            <span>Nossa Linha do Tempo</span>
        </button>
    </section>

    <div class="timeline-modal" id="timelineModal">
        <div class="timeline-modal-content">
            <div class="timeline-modal-header">
                <h2><i class="fas fa-heart"></i> Nossa Hist√≥ria</h2>
                <button class="close-timeline-btn" id="closeTimelineBtn"><i class="fas fa-times"></i></button>
            </div>
            <div class="timeline-scroll">
                <div class="timeline-container">

                <!-- Eventos ser√£o carregados automaticamente do Firebase -->
                    <div class="timeline-end">
                        <div class="timeline-heart"><i class="fas fa-infinity"></i></div>
                        <p>E nossa hist√≥ria continua...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="secret-modal" id="secretModal">
        <div class="secret-modal-content">
            <button class="close-secret-btn" id="closeSecretBtn"><i class="fas fa-times"></i></button>
            <div class="secret-icon"><i class="fas fa-heart"></i></div>
            <div class="secret-message" id="secretMessageText"></div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-heart"><i class="fas fa-heart"></i></div>
            <p class="footer-text">Feito com üíñ para voc√™, Iara</p>
            <p class="footer-date" id="currentDate">Carregando...</p>
            <div class="footer-names">
                <span>Kevin</span> 
                <i class="fas fa-heart"></i> 
                <span>Iara</span>
            </div>
        </div>
    </footer>
</div>

<!-- ===== BOT√ÉO FLUTUANTE DE ADMIN (ESCONDIDO - ACESS√çVEL PELO MENU) ===== -->
<button class="admin-toggle-btn" id="adminToggleBtn" title="Modo Admin" style="display: none !important;">
    <i class="fas fa-lock"></i>
</button>

<!-- ===== MODAL DE ADMIN COMPLETO ===== -->
<div class="admin-modal" id="adminModal">
    <div class="admin-modal-content">
        <div class="admin-header">
            <h2><i class="fas fa-user-shield"></i> Painel de Admin</h2>
            <button class="close-admin-btn" id="closeAdminBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
<div class="admin-tabs">
    <button class="admin-tab active" data-tab="albums">
        <i class="fas fa-images"></i> √Ålbuns
    </button>
    <button class="admin-tab" data-tab="timeline">
        <i class="fas fa-clock"></i> Timeline
    </button>
    <button class="admin-tab" data-tab="playlists">
        <i class="fas fa-music"></i> Playlists
    </button>
    <button class="admin-tab" data-tab="edit">
        <i class="fas fa-edit"></i> Editar √Ålbum
    </button>
</div>
        
        <!-- TAB: Gerenciar √Ålbuns -->
        <div class="admin-content active" id="albums-tab">
            <div class="admin-section">
                <h3><i class="fas fa-plus-circle"></i> Adicionar Novo √Ålbum</h3>
                <form id="addAlbumForm">
                    <label for="albumTitle" style="display: none;">T√≠tulo do √Ålbum</label>
                    <input type="text" id="albumTitle" placeholder="T√≠tulo do √Ålbum" required>
                    
                    <label for="albumDate" style="display: none;">Data</label>
                    <input type="text" id="albumDate" placeholder="Data (ex: Junho 2023)" required>
                    
                    <label for="albumDescription" style="display: none;">Descri√ß√£o</label>
                    <textarea id="albumDescription" placeholder="Descri√ß√£o do √°lbum" rows="3" required></textarea>
                    
                    <label for="albumCover" style="display: none;">Capa do √Ålbum</label>
                    <input type="file" id="albumCover" accept="image/*" required>
                    
                    <button type="submit" class="admin-btn">
                        <i class="fas fa-save"></i> Criar √Ålbum
                    </button>
                </form>
            </div>
            
            <div class="admin-section">
                <h3><i class="fas fa-photo-video"></i> Adicionar Fotos ao √Ålbum</h3>
                <label for="selectAlbum" style="display: none;">Selecionar √Ålbum</label>
                <select id="selectAlbum" class="admin-select" aria-label="Selecionar √°lbum">
                    <option value="">Selecione um √°lbum</option>
                </select>
                <form id="addPhotoForm">
                    <label for="photoFile" style="display: none;">Selecionar Fotos</label>
                    <input type="file" id="photoFile" accept="image/*" multiple required>
                    <button type="submit" class="admin-btn">
                        <i class="fas fa-upload"></i> Adicionar Fotos
                    </button>
                </form>
            </div>
            
            <div class="admin-section">
                <h3><i class="fas fa-list"></i> √Ålbuns Existentes</h3>
                <div id="existingAlbums" class="existing-items"></div>
            </div>
        </div>
        
        <!-- TAB: Gerenciar Timeline -->
        <div class="admin-content" id="timeline-tab">
            <div class="admin-section">
                <h3><i class="fas fa-plus-circle"></i> Adicionar Evento na Timeline</h3>
                <form id="addTimelineForm">
                    <label for="eventDate" style="display: none;">Data do Evento</label>
                    <input type="text" id="eventDate" placeholder="Data (ex: Setembro 2022)" required>
                    
                    <label for="eventTitle" style="display: none;">T√≠tulo do Evento</label>
                    <input type="text" id="eventTitle" placeholder="T√≠tulo do Evento" required>
                    
                    <label for="eventSecret" style="display: none;">Mensagem Secreta</label>
                    <textarea id="eventSecret" placeholder="Mensagem secreta (opcional)" rows="3"></textarea>
                    
                    <label for="eventPhoto" style="display: none;">Foto do Evento</label>
                    <input type="file" id="eventPhoto" accept="image/*" required>
                    
                    <label for="photoCaption" style="display: none;">Legenda da Foto</label>
                    <input type="text" id="photoCaption" placeholder="Legenda da foto">
                    
                    <button type="submit" class="admin-btn">
                        <i class="fas fa-save"></i> Adicionar Evento
                    </button>
                </form>
            </div>
            
            <div class="admin-section">
                <h3><i class="fas fa-list"></i> Eventos Existentes</h3>
                <div id="existingEvents" class="existing-items"></div>
            </div>
        </div>
        <!-- TAB: Gerenciar Playlists -->
        <div class="admin-content" id="playlists-tab">
            <div class="playlist-create-card">
                <div class="card-icon-header">
                    <div class="icon-circle">
                        <i class="fas fa-plus"></i>
                    </div>
                    <h3>Criar Nova Playlist</h3>
                </div>
                
                <form id="createPlaylistForm" class="modern-form">
                    <div class="input-group">
                        <label>
                            <i class="fas fa-music"></i>
                            Nome da Playlist
                        </label>
                        <input type="text" id="playlistName" placeholder="Ex: Rom√¢nticas, Rock, Sertanejo..." required>
                    </div>
                    
                    <div class="input-group">
                        <label>
                            <i class="fas fa-icons"></i>
                            Escolha um √çcone
                        </label>
                        <div class="icon-selector">
                            <input type="radio" name="playlistIcon" id="icon-heart" value="fa-heart" checked>
                            <label for="icon-heart" class="icon-option">
                                <i class="fas fa-heart"></i>
                            </label>
                            
                            <input type="radio" name="playlistIcon" id="icon-music" value="fa-music">
                            <label for="icon-music" class="icon-option">
                                <i class="fas fa-music"></i>
                            </label>
                            
                            <input type="radio" name="playlistIcon" id="icon-guitar" value="fa-guitar">
                            <label for="icon-guitar" class="icon-option">
                                <i class="fas fa-guitar"></i>
                            </label>
                            
                            <input type="radio" name="playlistIcon" id="icon-fire" value="fa-fire">
                            <label for="icon-fire" class="icon-option">
                                <i class="fas fa-fire"></i>
                            </label>
                            
                            <input type="radio" name="playlistIcon" id="icon-star" value="fa-star">
                            <label for="icon-star" class="icon-option">
                                <i class="fas fa-star"></i>
                            </label>
                            
                            <input type="radio" name="playlistIcon" id="icon-headphones" value="fa-headphones">
                            <label for="icon-headphones" class="icon-option">
                                <i class="fas fa-headphones"></i>
                            </label>
                        </div>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-check-circle"></i>
                        Criar Playlist
                    </button>
                </form>
            </div>
            
            <div class="playlist-add-music-card" id="addMusicSection" style="display: none;">
                <div class="card-icon-header">
                    <div class="icon-circle green">
                        <i class="fas fa-compact-disc"></i>
                    </div>
                    <h3>Adicionar M√∫sica</h3>
                </div>
                
                <div class="input-group">
                    <label>
                        <i class="fas fa-list-music"></i>
                        Selecione a Playlist
                    </label>
                    <select id="selectPlaylistForMusic" class="modern-select">
                        <option value="">Escolha uma playlist...</option>
                    </select>
                </div>
                
                <form id="addMusicForm" class="modern-form" style="display: none; margin-top: 20px;">
                    <div class="form-row">
                        <div class="input-group">
                            <label>
                                <i class="fas fa-font"></i>
                                T√≠tulo da M√∫sica
                            </label>
                            <input type="text" id="musicTitle" placeholder="Nome da m√∫sica" required>
                        </div>
                        
                        <div class="input-group">
                            <label>
                                <i class="fas fa-user-music"></i>
                                Artista
                            </label>
                            <input type="text" id="musicArtist" placeholder="Nome do artista" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>üìÅ Arquivo de √Åudio</label>
                        <input type="file" id="musicAudioFile" accept="audio/*" required>
                        <small style="color: var(--theme-text-secondary); display: block; margin-top: 5px;">
                            MP3, M4A, WAV, OGG, FLAC (m√°ximo 100MB)
                        </small>
                    </div>

                    <div id="coverPreviewContainer" class="cover-preview-container" style="display: none; margin-top: 10px;">
                        <div style="display: grid; grid-template-columns: 80px 1fr; gap: 12px; padding: 12px; background: rgba(255, 255, 255, 0.03); border: 1px solid var(--theme-card-border); border-radius: 8px; align-items: center;">
                            <img id="coverPreviewImage" 
                                style="width: 80px; height: 80px; border-radius: 6px; object-fit: cover; box-shadow: 0 2px 8px rgba(0,0,0,0.4);" 
                                alt="Capa da m√∫sica">
                            <div style="min-width: 0;">
                                <div style="font-size: 0.75rem; font-weight: 600; color: var(--theme-primary); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px;">
                                    üìÄ Preview da Capa
                                </div>
                                <div id="coverPreviewInfo" style="font-size: 0.8rem; color: var(--theme-text); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-weight: 500;">
                                    Processando...
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="submit-btn green">
                        <i class="fas fa-plus-circle"></i>
                        Adicionar √† Playlist
                    </button>
                </form>
            </div>
            
            <div class="playlists-library">
                <div class="library-header">
                    <div class="header-icon">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <h3>Suas Playlists</h3>
                </div>
                
                <div id="existingPlaylists" class="playlists-grid">
                    <div class="loading-state">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Carregando playlists...</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- TAB: Editar √Ålbum -->
        <div class="admin-content" id="edit-tab">
            <!-- Seletor de √°lbum -->
            <div class="admin-section">
                <h3><i class="fas fa-folder-open"></i> Selecione um √Ålbum</h3>
                <select id="editAlbumSelect" class="admin-select">
                    <option value="">Escolha um √°lbum...</option>
                </select>
                <button id="loadEditAlbumBtn" class="admin-btn" style="margin-top: 12px;">
                    <i class="fas fa-images"></i> Carregar Fotos
                </button>
            </div>
            
            <!-- √Årea de edi√ß√£o de informa√ß√µes do √°lbum -->
            <div id="editAlbumInfoSection" style="display: none;">
                <div class="admin-section">
                    <h3><i class="fas fa-pen"></i> Editar Informa√ß√µes do √Ålbum</h3>
                    <button id="toggleAlbumInfoEdit" class="simple-edit-btn">
                        <i class="fas fa-edit"></i>
                        <span class="edit-text">Editar √Ålbum</span>
                    </button>
                    <!-- Form de edi√ß√£o (inicialmente oculto) -->
                    <div id="albumInfoEditForm" style="display: none; margin-top: 15px;">
                        <div class="edit-form-grid">
                            <!-- Preview da capa -->
                            <div class="cover-preview-container">
                                <img id="currentCoverPreview" src="" alt="Capa atual">
                                <label for="newCoverInput" class="change-cover-label">
                                    <i class="fas fa-camera"></i>
                                    <span>Trocar Capa</span>
                                </label>
                                <input type="file" id="newCoverInput" accept="image/*" style="display: none;" aria-label="Selecionar nova capa do √°lbum">
                            </div>
                            
                            <!-- Campos de texto -->
                            <div class="edit-fields-container">
                                <div class="edit-field">
                                    <label>T√≠tulo</label>
                                    <input type="text" id="editAlbumTitle" placeholder="T√≠tulo do √°lbum">
                                </div>
                                
                                <div class="edit-field">
                                    <label>Data</label>
                                    <input type="text" id="editAlbumDate" placeholder="Ex: Junho 2023">
                                </div>
                                
                                <div class="edit-field">
                                    <label>Descri√ß√£o</label>
                                    <textarea id="editAlbumDescription" rows="3" placeholder="Descri√ß√£o do √°lbum"></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Bot√µes de a√ß√£o -->
                        <div class="edit-actions">
                            <button id="cancelAlbumEdit" class="minimal-btn cancel">
                                <i class="fas fa-times"></i>
                                <span>Cancelar</span>
                            </button>
                            <button id="saveAlbumEdit" class="minimal-btn save">
                                <i class="fas fa-check"></i>
                                <span>Salvar</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- √Årea de edi√ß√£o -->
            <div id="editAlbumSection" style="display: none;">
                <!-- Grid de fotos (estilo galeria real) -->
                <div id="editPhotosGrid" class="edit-photos-grid"></div>
            </div>
        </div>
    </div>
</div>

<!-- ORDEM CORRETA DE CARREGAMENTO DOS SCRIPTS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jsmediatags/3.9.5/jsmediatags.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>
<script src="cloudinary-config.js"></script>
<script src="lazy-loading.js"></script>
<script src="mp3-cover-extractor.js"></script>
<script src="animations.js"></script>
<script src="admin.js"></script>
<script src="playlist-manager.js"></script>
<script src="script.js"></script>

</body>
</html>